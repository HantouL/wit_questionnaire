import{watch as n,unref as t,inject as e,computed as r,watchEffect as o,Vue2 as i,defineComponent as a,shallowRef as u,toRefs as c,getCurrentInstance as l,onMounted as s,onBeforeUnmount as v,h as f,nextTick as p}from"vue-demi";import{throttle as d,init as g}from"echarts/core";import{addListener as h,removeListener as O}from"resize-detector";var m=function(){return m=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},m.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var b=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function y(n){return t=Object.create(null),b.forEach((function(e){t[e]=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!n.value)throw new Error("ECharts is not initialized yet.");return n.value[t].apply(n.value,e)}}(e)})),t;var t}var j={autoresize:[Boolean,Object]},_=/^on[^a-z]/,E=function(n){return _.test(n)};function z(n,e){var r=t(n);return r&&"object"==typeof r&&"value"in r?r.value||e:r||e}var x="ecLoadingOptions";var A={loading:Boolean,loadingOptions:Object},L="x-vue-echarts";i&&i.config.ignoredElements.push(L);var w="ecTheme",D="ecInitOptions",U="ecUpdateOptions",C=a({name:"echarts",props:m(m({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},j),A),emits:{},inheritAttrs:!1,setup:function(t,i){var a=i.attrs,f=u(),b=u(),j=u(),_=u(),A=e(w,null),L=e(D,null),C=e(U,null),P=c(t),S=P.autoresize,B=P.manualUpdate,R=P.loading,k=P.loadingOptions,T=r((function(){return _.value||t.option||null})),F=r((function(){return t.theme||z(A,{})})),H=r((function(){return t.initOptions||z(L,{})})),I=r((function(){return t.updateOptions||z(C,{})})),M=r((function(){return function(n){var t={};for(var e in n)E(e)||(t[e]=n[e]);return t}(a)})),W=l().proxy.$listeners;function Z(n){if(b.value){var e=j.value=g(b.value,F.value,H.value);t.group&&(e.group=t.group);var r=W;r||(r={},Object.keys(a).filter((function(n){return 0===n.indexOf("on")&&n.length>2})).forEach((function(n){var t=n.charAt(2).toLowerCase()+n.slice(3);"Once"===t.substring(t.length-4)&&(t="~".concat(t.substring(0,t.length-4))),r[t]=a[n]}))),Object.keys(r).forEach((function(n){var t=r[n];if(t){var o=n.toLowerCase();"~"===o.charAt(0)&&(o=o.substring(1),t.__once__=!0);var i=e;if(0===o.indexOf("zr:")&&(i=e.getZr(),o=o.substring(3)),t.__once__){delete t.__once__;var a=t;t=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];a.apply(void 0,n),i.off(o,t)}}i.on(o,t)}})),S.value?p((function(){e&&!e.isDisposed()&&e.resize(),o()})):o()}function o(){var t=n||T.value;t&&e.setOption(t,I.value)}}function $(){j.value&&(j.value.dispose(),j.value=void 0)}var q=null;n(B,(function(e){"function"==typeof q&&(q(),q=null),e||(q=n((function(){return t.option}),(function(n,t){n&&(j.value?j.value.setOption(n,m({notMerge:n!==t},I.value)):Z())}),{deep:!0}))}),{immediate:!0}),n([F,H],(function(){$(),Z()}),{deep:!0}),o((function(){t.group&&j.value&&(j.value.group=t.group)}));var G=y(j);return function(n,t,i){var a=e(x,{}),u=r((function(){return m(m({},z(a,{})),null==i?void 0:i.value)}));o((function(){var e=n.value;e&&(t.value?e.showLoading(u.value):e.hideLoading())}))}(j,R,k),function(t,e,r){var o=null;n([r,t,e],(function(n,t,e){var r=n[0],i=n[1],a=n[2];if(r&&i&&a){var u=!0===a?{}:a,c=u.throttle,l=void 0===c?100:c,s=u.onResize,v=function(){i.resize(),null==s||s()};o=l?d(v,l):v,h(r,o)}e((function(){r&&o&&O(r,o)}))}))}(j,S,b),s((function(){Z()})),v((function(){$()})),m({chart:j,root:f,inner:b,setOption:function(n,e){t.manualUpdate&&(_.value=n),j.value?j.value.setOption(n,e||{}):Z(n)},nonEventAttrs:M},G)},render:function(){var n=i?{attrs:this.nonEventAttrs}:m({},this.nonEventAttrs);return n.ref="root",n.class=n.class?["echarts"].concat(n.class):"echarts",f(L,n,[f("div",{ref:"inner",class:"echarts-inner"})])}});export{D as INIT_OPTIONS_KEY,x as LOADING_OPTIONS_KEY,w as THEME_KEY,U as UPDATE_OPTIONS_KEY,C as default};
//# sourceMappingURL=index.esm.min.js.map
