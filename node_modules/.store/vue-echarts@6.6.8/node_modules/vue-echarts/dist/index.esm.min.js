import{watch as e,unref as t,inject as n,computed as r,watchEffect as o,Vue2 as i,defineComponent as a,shallowRef as u,toRefs as s,getCurrentInstance as c,onMounted as l,onBeforeUnmount as f,h as p,nextTick as v}from"vue-demi";import{throttle as d,init as h}from"echarts/core";import{addListener as g,removeListener as m}from"resize-detector";var O=function(){return O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},O.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var b=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function y(e){return t=Object.create(null),b.forEach((function(n){t[n]=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,n)}}(n)})),t;var t}var E={autoresize:[Boolean,Object]},_=/^on[^a-z]/,j=function(e){return _.test(e)};function x(e,n){var r=t(e);return r&&"object"==typeof r&&"value"in r?r.value||n:r||n}var A="ecLoadingOptions";var z={loading:Boolean,loadingOptions:Object},w=null,C="x-vue-echarts";var L=[],T=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",o=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var a=L.indexOf(i);-1===a&&(a=L.push(i)-1,T[a]={}),n=T[a]&&T[a][r]?T[a][r]:T[a][r]=u()}else n=u();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function u(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),o=0;o<n.length;o++)e.setAttribute(n[o],t.attributes[n[o]]);var a="prepend"===r?"afterbegin":"beforeend";return i.insertAdjacentElement(a,e),e}}("x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}\n",{});var S=function(){if(null!=w)return w;if("undefined"==typeof HTMLElement||"undefined"==typeof customElements)return w=!1;try{new Function("tag","class EChartsElement extends HTMLElement {\n  __dispose = null;\n\n  disconnectedCallback() {\n    if (this.__dispose) {\n      this.__dispose();\n      this.__dispose = null;\n    }\n  }\n}\n\nif (customElements.get(tag) == null) {\n  customElements.define(tag, EChartsElement);\n}\n")(C)}catch(e){return w=!1}return w=!0}();i&&i.config.ignoredElements.push(C);var D="ecTheme",U="ecInitOptions",k="ecUpdateOptions",B=a({name:"echarts",props:O(O({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},E),z),emits:{},inheritAttrs:!1,setup:function(t,i){var a=i.attrs,p=u(),b=u(),E=u(),_=u(),z=n(D,null),w=n(U,null),C=n(k,null),L=s(t),T=L.autoresize,B=L.manualUpdate,P=L.loading,H=L.loadingOptions,M=r((function(){return _.value||t.option||null})),R=r((function(){return t.theme||x(z,{})})),F=r((function(){return t.initOptions||x(w,{})})),N=r((function(){return t.updateOptions||x(C,{})})),q=r((function(){return function(e){var t={};for(var n in e)j(n)||(t[n]=e[n]);return t}(a)})),I=c().proxy.$listeners;function W(e){if(b.value){var n=E.value=h(b.value,R.value,F.value);t.group&&(n.group=t.group);var r=I;r||(r={},Object.keys(a).filter((function(e){return 0===e.indexOf("on")&&e.length>2})).forEach((function(e){var t=e.charAt(2).toLowerCase()+e.slice(3);"Once"===t.substring(t.length-4)&&(t="~".concat(t.substring(0,t.length-4))),r[t]=a[e]}))),Object.keys(r).forEach((function(e){var t=r[e];if(t){var o=e.toLowerCase();"~"===o.charAt(0)&&(o=o.substring(1),t.__once__=!0);var i=n;if(0===o.indexOf("zr:")&&(i=n.getZr(),o=o.substring(3)),t.__once__){delete t.__once__;var a=t;t=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];a.apply(void 0,e),i.off(o,t)}}i.on(o,t)}})),T.value?v((function(){n&&!n.isDisposed()&&n.resize(),o()})):o()}function o(){var t=e||M.value;t&&n.setOption(t,N.value)}}function Z(){E.value&&(E.value.dispose(),E.value=void 0)}var $=null;e(B,(function(n){"function"==typeof $&&($(),$=null),n||($=e((function(){return t.option}),(function(e,t){e&&(E.value?E.value.setOption(e,O({notMerge:e!==t},N.value)):W())}),{deep:!0}))}),{immediate:!0}),e([R,F],(function(){Z(),W()}),{deep:!0}),o((function(){t.group&&E.value&&(E.value.group=t.group)}));var G=y(E);return function(e,t,i){var a=n(A,{}),u=r((function(){return O(O({},x(a,{})),null==i?void 0:i.value)}));o((function(){var n=e.value;n&&(t.value?n.showLoading(u.value):n.hideLoading())}))}(E,P,H),function(t,n,r){var o=null;e([r,t,n],(function(e,t,n){var r=e[0],i=e[1],a=e[2];if(r&&i&&a){var u=!0===a?{}:a,s=u.throttle,c=void 0===s?100:s,l=u.onResize,f=function(){i.resize(),null==l||l()};o=c?d(f,c):f,g(r,o)}n((function(){r&&o&&m(r,o)}))}))}(E,T,b),l((function(){W()})),f((function(){S&&p.value?p.value.__dispose=Z:Z()})),O({chart:E,root:p,inner:b,setOption:function(e,n){t.manualUpdate&&(_.value=e),E.value?E.value.setOption(e,n||{}):W(e)},nonEventAttrs:q},G)},render:function(){var e=i?{attrs:this.nonEventAttrs}:O({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",p(C,e,[p("div",{ref:"inner",class:"echarts-inner"})])}});export{U as INIT_OPTIONS_KEY,A as LOADING_OPTIONS_KEY,D as THEME_KEY,k as UPDATE_OPTIONS_KEY,B as default};
//# sourceMappingURL=index.esm.min.js.map
